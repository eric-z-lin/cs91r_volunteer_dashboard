<!-- templates/events.html -->
{% extends 'base.html' %}

{% block title %}Dashboard -- Events{% endblock %}

{% block content %}
	{% if user.is_authenticated %}
    <!-- Navbar -->
    <section class="hero is-info is-bold is-large">
      <div class="hero-head">
        <nav class="navbar">
          <div class="container">
            <div class="navbar-brand">
              <a href="{% url 'home' %}" class="navbar-item is-size-3">
                {% load static %}
                <img src ="{% static 'images/icon.png' %}" alt="icon"/>
                Volunteer Dashboard
              </a>
              <!-- Hamburger icon for mobile -->
              <span class="navbar-burger burger" data-target="navbarMenuHeroA">
                <span></span>
                <span></span>
                <span></span>
              </span>
            </div>
            <!-- Right side of navbar -->
            <div id="navbarMenuHeroA" class="navbar-menu">
              <div class="navbar-end">
                <a class="navbar-item" href="{% url 'home' %}">
                  Home
                </a>
                <a class="navbar-item is-active" href="{% url 'events' %}">
                  Events
                </a>
                <a class="navbar-item" href="{% url 'volunteers' %}">
                  Volunteers
                </a>
                <span class="navbar-item">
                  <a class="button is-primary is-inverted">
                    <span class="icon">
                      <i class="fas fa-user"></i>
                    </span>
                    <span>Profile</span>
                  </a>
                </span>
                <a class="navbar-item" href="{% url 'logout' %}">
                  Logout
                </a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </section>

    <!-- Body of home page. -->
    <section class="section">
      <div class="hero-body">
        <div class="container has-text-centered">
          <h1 class="title">
            Hi {{ user.username }}!
          </h1>
          <h2 class="subtitle">
            This is the events page. View, add, and edit events.
          </h2>
        </div>
        <!-- Add new event -->
        <div class="container has-text-centered">
            <a href="{% url 'add_event' %}">
              <br>
              <button class="button is-primary">
                New event
              </button>
            </a>
        </div>
        <!-- Table to display events. -->
        <div class="container has-text-centered">
          <div class="column is-6 is-offset-3">
            <table class="table">
              <!-- Column names at the top. -->
              <thead>
                <tr>
                  <th> Name </th>
                  <th> Description </th>
                  <th> Location </th>
                  <th> Date </th>
                  <th> Volunteers </th>
                  <th> Cost </th>
                </tr>
              </thead>
              <!-- Column names at the bottom. -->
              <tfoot>
                <tr>
                  <th> Name </th>
                  <th> Description </th>
                  <th> Location </th>
                  <th> Date </th>
                  <th> Volunteers </th>
                  <th> Cost </th>
                </tr>
              </tfoot>
              <!-- Events data. -->
              <tbody>
                {% for event in events %}
                  <tr>
                    <td><a> {{event.name}} </a></td>
                    <td> {{event.description}} </td>
                    <td> {{event.address}} </td>
                    <td> {{event.time}} </td>
                    <td> 
                      {% for v in event.volunteers %} 
                        v.name,
                      {% endfor %}
                    </td>
                    <td> {{event.cost}} </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Footer of home page. -->
      <div class="hero-foot is-light has-text-centered">
        <a>
          March 2019 <br>
          Developed by Eric Lin, Julian Lee, and Isaac Robinson
        </a>
      </div>
    </section>
	<!-- If user not logged in. -->
	{% else %}
		<section class="hero is-info is-bold is-fullheight">
			<div class="hero-body">
			    <div class="container has-text-centered">
            <h1 class="title">
					  Volunteer Dashboard
					</h1>
					<br>
					<h2 class="subtitle">
						You are not logged in. <br>
						<a href="{% url 'login' %}">login</a> |
						<a href="{% url 'signup' %}">signup</a>
					</h2>
				</div>
			</div>
		</section>
	{% endif %}

{% endblock %}